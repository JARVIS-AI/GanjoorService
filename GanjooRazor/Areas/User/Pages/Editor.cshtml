@page
@model GanjooRazor.Areas.User.Pages.EditorModel
@using DNTPersianUtils.Core
@{
    Layout = "_Layout";
    ViewData["Title"] = "ویرایشگر شعر";
}
<h1>@ViewData["Title"]</h1>

@if (!string.IsNullOrEmpty(Model.FatalError))
{
    <p>@Model.FatalError</p>
}
else
{
<table>
    <tr>
        <td>
            عنوان فعلی:
        </td>
    </tr>
    <tr>
        <td>
            <p id="original-0">@Model.PageInformation.Poem.Title</p>
        </td>
    </tr>
    <tr>
        <td>
            عنوان ویراستهٔ من:
        </td>
    </tr>
    <tr>
        <td>
            <input type="text" id="id-0" name="id-0" value="@Model.PageInformation.Poem.Title" size="100" oninput="editorcompare(0)" />
        </td>
    </tr>
    <tr>
        <td>
            تغییرات:
        </td>
    </tr>
    <tr>
        <td>
            <p id="compare-0">@Model.PageInformation.Poem.Title</p>
        </td>
    </tr>
    @foreach (var verse in Model.PageInformation.Poem.Verses)
    {
        <tr>
            <td>
                بیت @Model.GetVerseCoupletNumber(verse).ToPersianNumbers()
            </td>
        </tr>
        <tr>
            <td>
                مصرع @verse.VOrder.ToPersianNumbers()
            </td>
        </tr>
        <tr>
            <td>
                نوع: @Model.GetVersePosition(verse)
            </td>
        </tr>
        <tr>
            <td>
                متن فعلی:
            </td>
        </tr>
        <tr>
            <td>
                <p id="original-@($"{verse.Id}")">@verse.Text</p>
            </td>
        </tr>
        <tr>
            <td>
                ویراستهٔ من:
            </td>
        </tr>
        <tr>
            <td>
                <input type="text" id="id-@($"{verse.Id}")" name="name-@($"{verse.Id}")" value="@verse.Text" size="100" oninput="editorcompare(@verse.Id)" />
            </td>
        </tr>
        <tr>
            <td>
                تغییرات:
            </td>
        </tr>
        <tr>
            <td>
                <p id="compare-@($"{verse.Id}")">@verse.Text</p>
            </td>
        </tr>

    }

    <tr>
        <td>
            وزن فعلی:
        </td>
    </tr>
    <tr>
        <td>
            <p id="rhythm-old">@(Model.PageInformation.Poem.GanjoorMetre == null ? "" : Model.PageInformation.Poem.GanjoorMetre.Rhythm)</p>
        </td>
    </tr>
    <tr>
        <td>
            وزن ویراستهٔ من:
        </td>
    </tr>
    <tr>
        <td>
            <input type="text" id="rhythm-new" name="rhythm-new" value="@(Model.PageInformation.Poem.GanjoorMetre == null ? "" : Model.PageInformation.Poem.GanjoorMetre.Rhythm)" size="100" list="rythms" />
            <datalist id="rythms">
                @if (Model.Rhythms != null)
                    @foreach (var rhythm in Model.Rhythms)
                    {
                        <option value="@rhythm.Rhythm">@rhythm.Rhythm</option>
                    }
            </datalist>
        </td>
    </tr>
    <tr>
        <td>
            توضیح این ویرایش:
        </td>
    </tr>

    <tr>
        <td>
            <input type="text" id="note" name="rnote" value="" size="100" />
        </td>
    </tr>

    <tr>
        <td>
            <a role="button" style="cursor:pointer;width:100%;color:white;background-color:green;display:block" onclick="savePoem(@Model.PageInformation.Poem.Id, @Model.PageInformation.Poem.Verses.Length)">ذخیره</a>
        </td>
    </tr>

</table>

}